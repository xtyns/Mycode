function fval = fun(x)
N=1745;
% 塔坐标
focos_pos=[x(1),x(2),84];
% 镜面中心坐标
Mirror_center_pos=[x(3:2+N)',x(3+N:end)',4*ones(N,1)];
fval=0;
fval=sum((Mirror_center_pos(:,1).^2+Mirror_center_pos(:,2).^2)>350^2);


d=pdist(Mirror_center_pos);
d=squareform(d)+diag(ones(1,N)*12);

fval=fval+sum(sum(d<12.*(12-d)))/10;

if fval>5
    return
end



alpha_s=[
0.304226866416981	0.474837239053894	0.538150552334913	0.474837239053894	0.304226866416981
0.433378853425089	0.624353109453174	0.697604839300040	0.624353109453174	0.433378853425089
0.578065947150064	0.795070156403059	0.883136601509131	0.795070156403059	0.578065947150064
0.725592241809215	0.974851283847130	1.08697005950528	0.974851283847130	0.725592241809215
0.821146423752211	1.09545818028920	1.23559174776059	1.09545818028920	0.821146423752211
0.853907031851067	1.13736122381660	1.29238015998353	1.13736122381660	0.853907031851067
0.820052728606225	1.09406119251506	1.23376307100725	1.09406119251506	0.820052728606225
0.719361737053037	0.967105572241856	1.07787670569265	0.967105572241856	0.719361737053037
0.570264634010507	0.785747231683253	0.872862007782388	0.785747231683253	0.570264634010507
0.416329640345013	0.604491228842180	0.676298608618018	0.604491228842180	0.416329640345013
0.293727079694141	0.462762617887302	0.525352356554968	0.462762617887302	0.293727079694141
0.251406468208794	0.414187098305344	0.473957307810228	0.414187098305344	0.251406468208794];
gamma_s=[
2.36972763927681	2.72468503089140	3.14159265358979	2.72468503089140	2.36972763927681
2.26936256146417	2.65956930076227	3.14159265358979	2.65956930076227	2.26936256146417
2.13636228494298	2.56340462039048	3.14159265358979	2.56340462039048	2.13636228494298
1.95890188839711	2.41050901845492	3.14159265358979	2.41050901845492	1.95890188839711
1.79950378590167	2.23920543862633	3.14159265358979	2.23920543862633	1.79950378590167
1.73017648299424	2.15177022845157	3.14159265358979	2.15177022845157	1.73017648299424
1.80165339819382	2.24178047627940	3.14159261708955	2.24178047627940	1.80165339819382
1.96773119256783	2.41894814114087	3.14159262778023	2.41894814114087	1.96773119256783
2.14432559021341	2.56954297845912	3.14159265358979	2.56954297845912	2.14432559021341
2.28338778653253	2.66900678570032	3.14159265358979	2.66900678570032	2.28338778653253
2.37738504963834	2.72944046245421	3.14159265358979	2.72944046245421	2.37738504963834
2.40766766620232	2.74798669844503	3.14159265358979	2.74798669844503	2.40766766620232];


% 镜面反射向量
vector_reflection=focos_pos-Mirror_center_pos;
% 单位化镜面反射向量
vector_unit_reflection=vector_reflection./sqrt(sum(vector_reflection.^2,2));

cos_theta=zeros(12,5);

for i =1:12 % 指定月
    % 计算以北为x轴，东为y轴的坐标系下太阳的光线向量
   vector_sunlight=[
       -cos(alpha_s(i,:)).*cos(gamma_s(i,:));
       -cos(alpha_s(i,:)).*sin(gamma_s(i,:));
       -sin(alpha_s(i,:))
       ]; %规律：光线呈现出对称性
   for j=1:5 % 指定时间
       cos_theta(i,j)=mean(sqrt(1-vector_unit_reflection*vector_sunlight(:,j))/2);
   end

end

fval=fval-mean(mean(cos_theta));
end